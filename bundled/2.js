var e=(e,t,n)=>{return(r,i)=>{let a=-1;return o(0);async function o(s){if(s<=a)throw new Error(`next() called multiple times`);a=s;let c;let l=false;let u;if(e[s]){u=e[s][0][0];r.req.routeIndex=s}else u=s===e.length&&i||void 0;if(u)try{c=await u(r,()=>o(s+1))}catch(e){if(e instanceof Error&&t){r.error=e;c=await t(e,r);l=true}else throw e}else if(r.finalized===false&&n)c=await n(r);if(c&&(r.finalized===false||l))r.res=c;return r}}};var t=Symbol();var n=async(e,t=Object.create(null))=>{const{all:n=false,dot:i=false}=t;const a=e instanceof T?e.raw.headers:e.headers;const o=a.get(`Content-Type`);if(o?.startsWith(`multipart/form-data`)||o?.startsWith(`application/x-www-form-urlencoded`))return r(e,{all:n,dot:i});return{}};async function r(e,t){const n=await e.formData();if(n)return i(n,t);return{}}function i(e,t){const n=Object.create(null);e.forEach((e,r)=>{const i=t.all||r.endsWith(`[]`);if(!i)n[r]=e;else a(n,r,e)});if(t.dot)Object.entries(n).forEach(([e,t])=>{const r=e.includes(`.`);if(r){o(n,e,t);delete n[e]}});return n}var a=(e,t,n)=>{if(e[t]!==void 0)if(Array.isArray(e[t]))e[t].push(n);else e[t]=[e[t],n];else if(!t.endsWith(`[]`))e[t]=n;else e[t]=[n]};var o=(e,t,n)=>{let r=e;const i=t.split(`.`);i.forEach((e,t)=>{if(t===i.length-1)r[e]=n;else{if(!r[e]||typeof r[e]!==`object`||Array.isArray(r[e])||r[e]instanceof File)r[e]=Object.create(null);r=r[e]}})};var s=e=>{const t=e.split(`/`);if(t[0]===``)t.shift();return t};var c=e=>{const{groups:t,path:n}=l(e);const r=s(n);return u(r,t)};var l=e=>{const t=[];e=e.replace(/\{[^}]+\}/g,(e,n)=>{const r=`@${n}`;t.push([r,e]);return r});return{groups:t,path:e}};var u=(e,t)=>{for(let n=t.length-1;n>=0;n--){const[r]=t[n];for(let i=e.length-1;i>=0;i--)if(e[i].includes(r)){e[i]=e[i].replace(r,t[n][1]);break}}return e};var d={};var f=(e,t)=>{if(e===`*`)return`*`;const n=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(n){const r=`${e}#${t}`;if(!d[r])if(n[2])d[r]=t&&t[0]!==`:`&&t[0]!==`*`?[r,n[1],new RegExp(`^${n[2]}(?=/${t})`)]:[e,n[1],new RegExp(`^${n[2]}$`)];else d[r]=[e,n[1],true];return d[r]}return null};var p=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,e=>{try{return t(e)}catch{return e}})}};var m=e=>p(e,decodeURI);var h=e=>{const t=e.url;const n=t.indexOf(`/`,t.charCodeAt(9)===58?13:8);let r=n;for(;r<t.length;r++){const e=t.charCodeAt(r);if(e===37){const e=t.indexOf(`?`,r);const i=t.slice(n,e===-1?void 0:e);return m(i.includes(`%25`)?i.replace(/%25/g,`%2525`):i)}else if(e===63)break}return t.slice(n,r)};var g=e=>{const t=h(e);return t.length>1&&t.at(-1)===`/`?t.slice(0,-1):t};var _=(e,t,...n)=>{if(n.length)t=_(t,...n);return`${e?.[0]===`/`?``:`/`}${e}${t===`/`?``:`${e?.at(-1)===`/`?``:`/`}${t?.[0]===`/`?t.slice(1):t}`}`};var v=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(`:`))return null;const t=e.split(`/`);const n=[];let r=``;t.forEach(e=>{if(e!==``&&!/\:/.test(e))r+=`/`+e;else if(/\:/.test(e))if(/\?/.test(e)){if(n.length===0&&r===``)n.push(`/`);else n.push(r);const t=e.replace(`?`,``);r+=`/`+t;n.push(r)}else r+=`/`+e});return n.filter((e,t,n)=>n.indexOf(e)===t)};var y=e=>{if(!/[%+]/.test(e))return e;if(e.indexOf(`+`)!==-1)e=e.replace(/\+/g,` `);return e.indexOf(`%`)!==-1?p(e,C):e};var b=(e,t,n)=>{let r;if(!n&&t&&!/[%+]/.test(t)){let n=e.indexOf(`?${t}`,8);if(n===-1)n=e.indexOf(`&${t}`,8);while(n!==-1){const r=e.charCodeAt(n+t.length+1);if(r===61){const r=n+t.length+2;const i=e.indexOf(`&`,r);return y(e.slice(r,i===-1?void 0:i))}else if(r==38||isNaN(r))return``;n=e.indexOf(`&${t}`,n+1)}r=/[%+]/.test(e);if(!r)return void 0}const i={};r??=/[%+]/.test(e);let a=e.indexOf(`?`,8);while(a!==-1){const t=e.indexOf(`&`,a+1);let o=e.indexOf(`=`,a);if(o>t&&t!==-1)o=-1;let s=e.slice(a+1,o===-1?t===-1?void 0:t:o);if(r)s=y(s);a=t;if(s===``)continue;let c;if(o===-1)c=``;else{c=e.slice(o+1,t===-1?void 0:t);if(r)c=y(c)}if(n){if(!(i[s]&&Array.isArray(i[s])))i[s]=[];i[s].push(c)}else i[s]??=c}return t?i[t]:i};var x=b;var S=(e,t)=>{return b(e,t,true)};var C=decodeURIComponent;var w=e=>p(e,C);var T=class{raw;#validatedData;#matchResult;routeIndex=0;path;bodyCache={};constructor(e,t=`/`,n=[[]]){this.raw=e;this.path=t;this.#matchResult=n;this.#validatedData={}}param(e){return e?this.#getDecodedParam(e):this.#getAllDecodedParams()}#getDecodedParam(e){const t=this.#matchResult[0][this.routeIndex][1][e];const n=this.#getParamValue(t);return n?/\%/.test(n)?w(n):n:void 0}#getAllDecodedParams(){const e={};const t=Object.keys(this.#matchResult[0][this.routeIndex][1]);for(const n of t){const t=this.#getParamValue(this.#matchResult[0][this.routeIndex][1][n]);if(t&&typeof t===`string`)e[n]=/\%/.test(t)?w(t):t}return e}#getParamValue(e){return this.#matchResult[1]?this.#matchResult[1][e]:e}query(e){return x(this.url,e)}queries(e){return S(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};this.raw.headers.forEach((e,n)=>{t[n]=e});return t}async parseBody(e){return this.bodyCache.parsedBody??=await n(this,e)}#cachedBody=e=>{const{bodyCache:t,raw:n}=this;const r=t[e];if(r)return r;const i=Object.keys(t)[0];if(i)return t[i].then(t=>{if(i===`json`)t=JSON.stringify(t);return new Response(t)[e]()});return t[e]=n[e]()};json(){return this.#cachedBody(`text`).then(e=>JSON.parse(e))}text(){return this.#cachedBody(`text`)}arrayBuffer(){return this.#cachedBody(`arrayBuffer`)}blob(){return this.#cachedBody(`blob`)}formData(){return this.#cachedBody(`formData`)}addValidatedData(e,t){this.#validatedData[e]=t}valid(e){return this.#validatedData[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[t](){return this.#matchResult}get matchedRoutes(){return this.#matchResult[0].map(([[,e]])=>e)}get routePath(){return this.#matchResult[0].map(([[,e]])=>e)[this.routeIndex].path}};var E={Stringify:1,BeforeStream:2,Stream:3};var D=(e,t)=>{const n=new String(e);n.isEscaped=true;n.callbacks=t;return n};var O=async(e,t,n,r,i)=>{if(typeof e===`object`&&!(e instanceof String)){if(!(e instanceof Promise))e=e.toString();if(e instanceof Promise)e=await e}const a=e.callbacks;if(!a?.length)return Promise.resolve(e);if(i)i[0]+=e;else i=[e];const o=Promise.all(a.map(e=>e({phase:t,buffer:i,context:r}))).then(e=>Promise.all(e.filter(Boolean).map(e=>O(e,t,false,r,i))).then(()=>i[0]));if(n)return D(await o,a);else return o};var k=`text/plain; charset=UTF-8`;var A=(e,t)=>{return{"Content-Type":e,...t}};var j=class{#rawRequest;#req;env={};#var;finalized=false;error;#status;#executionCtx;#res;#layout;#renderer;#notFoundHandler;#preparedHeaders;#matchResult;#path;constructor(e,t){this.#rawRequest=e;if(t){this.#executionCtx=t.executionCtx;this.env=t.env;this.#notFoundHandler=t.notFoundHandler;this.#path=t.path;this.#matchResult=t.matchResult}}get req(){this.#req??=new T(this.#rawRequest,this.#path,this.#matchResult);return this.#req}get event(){if(this.#executionCtx&&`respondWith`in this.#executionCtx)return this.#executionCtx;else throw Error(`This context has no FetchEvent`)}get executionCtx(){if(this.#executionCtx)return this.#executionCtx;else throw Error(`This context has no ExecutionContext`)}get res(){return this.#res||=new Response(null,{headers:this.#preparedHeaders??=new Headers})}set res(e){if(this.#res&&e){e=new Response(e.body,e);for(const[t,n]of this.#res.headers.entries()){if(t===`content-type`)continue;if(t===`set-cookie`){const t=this.#res.headers.getSetCookie();e.headers.delete(`set-cookie`);for(const n of t)e.headers.append(`set-cookie`,n)}else e.headers.set(t,n)}}this.#res=e;this.finalized=true}render=(...e)=>{this.#renderer??=e=>this.html(e);return this.#renderer(...e)};setLayout=e=>this.#layout=e;getLayout=()=>this.#layout;setRenderer=e=>{this.#renderer=e};header=(e,t,n)=>{if(this.finalized)this.#res=new Response(this.#res.body,this.#res);const r=this.#res?this.#res.headers:this.#preparedHeaders??=new Headers;if(t===void 0)r.delete(e);else if(n?.append)r.append(e,t);else r.set(e,t)};status=e=>{this.#status=e};set=(e,t)=>{this.#var??=new Map;this.#var.set(e,t)};get=e=>{return this.#var?this.#var.get(e):void 0};get var(){if(!this.#var)return{};return Object.fromEntries(this.#var)}#newResponse(e,t,n){const r=this.#res?new Headers(this.#res.headers):this.#preparedHeaders??new Headers;if(typeof t===`object`&&`headers`in t){const e=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[t,n]of e)if(t.toLowerCase()===`set-cookie`)r.append(t,n);else r.set(t,n)}if(n)for(const[e,t]of Object.entries(n))if(typeof t===`string`)r.set(e,t);else{r.delete(e);for(const n of t)r.append(e,n)}const i=typeof t===`number`?t:t?.status??this.#status;return new Response(e,{status:i,headers:r})}newResponse=(...e)=>this.#newResponse(...e);body=(e,t,n)=>this.#newResponse(e,t,n);text=(e,t,n)=>{return!this.#preparedHeaders&&!this.#status&&!t&&!n&&!this.finalized?new Response(e):this.#newResponse(e,t,A(k,n))};json=(e,t,n)=>{return this.#newResponse(JSON.stringify(e),t,A(`application/json`,n))};html=(e,t,n)=>{const r=e=>this.#newResponse(e,t,A(`text/html; charset=UTF-8`,n));return typeof e===`object`?O(e,E.Stringify,false,{}).then(r):r(e)};redirect=(e,t)=>{this.header(`Location`,String(e));return this.newResponse(null,t??302)};notFound=()=>{this.#notFoundHandler??=()=>new Response;return this.#notFoundHandler(this)}};var M=`ALL`;var N=`all`;var P=[`get`,`post`,`put`,`delete`,`options`,`patch`];var F=`Can not add a route since the matcher is already built.`;var I=class extends Error{};var L=`__COMPOSED_HANDLER`;var R=e=>{return e.text(`404 Not Found`,404)};var z=(e,t)=>{if(`getResponse`in e){const n=e.getResponse();return t.newResponse(n.body,n)}console.error(e);return t.text(`Internal Server Error`,500)};var B=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath=`/`;#path=`/`;routes=[];constructor(e={}){const t=[...P,N];t.forEach(e=>{this[e]=(t,...n)=>{if(typeof t===`string`)this.#path=t;else this.#addRoute(e,this.#path,t);n.forEach(t=>{this.#addRoute(e,this.#path,t)});return this}});this.on=(e,t,...n)=>{for(const r of[t].flat()){this.#path=r;for(const t of[e].flat())n.map(e=>{this.#addRoute(t.toUpperCase(),this.#path,e)})}return this};this.use=(e,...t)=>{if(typeof e===`string`)this.#path=e;else{this.#path=`*`;t.unshift(e)}t.forEach(e=>{this.#addRoute(M,this.#path,e)});return this};const{strict:n,...r}=e;Object.assign(this,r);this.getPath=n??true?e.getPath??h:g}#clone(){const e=new B({router:this.router,getPath:this.getPath});e.errorHandler=this.errorHandler;e.#notFoundHandler=this.#notFoundHandler;e.routes=this.routes;return e}#notFoundHandler=R;errorHandler=z;route(t,n){const r=this.basePath(t);n.routes.map(t=>{let i;if(n.errorHandler===z)i=t.handler;else{i=async(r,i)=>(await e([],n.errorHandler)(r,()=>t.handler(r,i))).res;i[L]=t.handler}r.#addRoute(t.method,t.path,i)});return this}basePath(e){const t=this.#clone();t._basePath=_(this._basePath,e);return t}onError=e=>{this.errorHandler=e;return this};notFound=e=>{this.#notFoundHandler=e;return this};mount(e,t,n){let r;let i;if(n)if(typeof n===`function`)i=n;else{i=n.optionHandler;if(n.replaceRequest===false)r=e=>e;else r=n.replaceRequest}const a=i?e=>{const t=i(e);return Array.isArray(t)?t:[t]}:e=>{let t=void 0;try{t=e.executionCtx}catch{}return[e.env,t]};r||=(()=>{const t=_(this._basePath,e);const n=t===`/`?0:t.length;return e=>{const t=new URL(e.url);t.pathname=t.pathname.slice(n)||`/`;return new Request(t,e)}})();const o=async(e,n)=>{const i=await t(r(e.req.raw),...a(e));if(i)return i;await n()};this.#addRoute(M,_(e,`*`),o);return this}#addRoute(e,t,n){e=e.toUpperCase();t=_(this._basePath,t);const r={basePath:this._basePath,path:t,method:e,handler:n};this.router.add(e,t,[n,r]);this.routes.push(r)}#handleError(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}#dispatch(t,n,r,i){if(i===`HEAD`)return(async()=>new Response(null,await this.#dispatch(t,n,r,`GET`)))();const a=this.getPath(t,{env:r});const o=this.router.match(i,a);const s=new j(t,{path:a,matchResult:o,env:r,executionCtx:n,notFoundHandler:this.#notFoundHandler});if(o[0].length===1){let e;try{e=o[0][0][0][0](s,async()=>{s.res=await this.#notFoundHandler(s)})}catch(e){return this.#handleError(e,s)}return e instanceof Promise?e.then(e=>e||(s.finalized?s.res:this.#notFoundHandler(s))).catch(e=>this.#handleError(e,s)):e??this.#notFoundHandler(s)}const c=e(o[0],this.errorHandler,this.#notFoundHandler);return(async()=>{try{const e=await c(s);if(!e.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return e.res}catch(e){return this.#handleError(e,s)}})()}fetch=(e,...t)=>{return this.#dispatch(e,t[1],t[0],e.method)};request=(e,t,n,r)=>{if(e instanceof Request)return this.fetch(t?new Request(e,t):e,n,r);e=e.toString();return this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${_(`/`,e)}`,t),n,r)};fire=()=>{addEventListener(`fetch`,e=>{e.respondWith(this.#dispatch(e.request,e,void 0,e.request.method))})}};var V=Object.create(null);var H=/\/(:\w+(?:{(?:(?:{[\d,]+})|[^}])+})?)|\/[^\/\?]+|(\?)/g;var U=/\*/;var W=class{name=`LinearRouter`;#routes=[];add(e,t,n){for(let r=0,i=v(t)||[t],a=i.length;r<a;r++)this.#routes.push([e,i[r],n])}match(e,t){const n=[];ROUTES_LOOP:for(let r=0,i=this.#routes.length;r<i;r++){const[i,a,o]=this.#routes[r];if(i===e||i===M){if(a===`*`||a===`/*`){n.push([o,V]);continue}const e=a.indexOf(`*`)!==-1;const r=a.indexOf(`:`)!==-1;if(!e&&!r){if(a===t||a+`/`===t)n.push([o,V])}else if(e&&!r){const e=a.charCodeAt(a.length-1)===42;const r=(e?a.slice(0,-2):a).split(U);const i=r.length-1;for(let n=0,a=0,o=r.length;n<o;n++){const o=r[n];const s=t.indexOf(o,a);if(s!==a)continue ROUTES_LOOP;a+=o.length;if(n===i){if(!e&&a!==t.length&&!(a===t.length-1&&t.charCodeAt(a)===47))continue ROUTES_LOOP}else{const e=t.indexOf(`/`,a);if(e===-1)continue ROUTES_LOOP;a=e}}n.push([o,V])}else if(r&&!e){const e=Object.create(null);const r=a.match(H);const i=r.length-1;for(let n=0,a=0,o=r.length;n<o;n++){if(a===-1||a>=t.length)continue ROUTES_LOOP;const o=r[n];if(o.charCodeAt(1)===58){let i=o.slice(2);let s;if(i.charCodeAt(i.length-1)===125){const e=i.indexOf(`{`);const o=r[n+1];const c=o&&o[1]!==`:`&&o[1]!==`*`?`(?=${o})`:``;const l=i.slice(e+1,-1)+c;const u=t.slice(a+1);const d=new RegExp(l,`d`).exec(u);if(!d||d.indices[0][0]!==0||d.indices[0][1]===0)continue ROUTES_LOOP;i=i.slice(0,e);s=u.slice(...d.indices[0]);a+=d.indices[0][1]+1}else{let e=t.indexOf(`/`,a+1);if(e===-1){if(a+1===t.length)continue ROUTES_LOOP;e=t.length}s=t.slice(a+1,e);a=e}e[i]||=s}else{const e=t.indexOf(o,a);if(e!==a)continue ROUTES_LOOP;a+=o.length}if(n===i){if(a!==t.length&&!(a===t.length-1&&t.charCodeAt(a)===47))continue ROUTES_LOOP}}n.push([o,e])}else if(r&&e)throw new I}}return[n]}};var G=class{name=`SmartRouter`;#routers=[];#routes=[];constructor(e){this.#routers=e.routers}add(e,t,n){if(!this.#routes)throw new Error(F);this.#routes.push([e,t,n])}match(e,t){if(!this.#routes)throw new Error(`Fatal error`);const n=this.#routers;const r=this.#routes;const i=n.length;let a=0;let o;for(;a<i;a++){const i=n[a];try{for(let e=0,t=r.length;e<t;e++)i.add(...r[e]);o=i.match(e,t)}catch(e){if(e instanceof I)continue;throw e}this.match=i.match.bind(i);this.#routers=[i];this.#routes=void 0;break}if(a===i)throw new Error(`Fatal error`);this.name=`SmartRouter + ${this.activeRouter.name}`;return o}get activeRouter(){if(this.#routes||this.#routers.length!==1)throw new Error(`No active router has been determined yet.`);return this.#routers[0]}};var K=Object.create(null);var q=class{#methods;#children;#patterns;#order=0;#params=K;constructor(e,t,n){this.#children=n||Object.create(null);this.#methods=[];if(e&&t){const n=Object.create(null);n[e]={handler:t,possibleKeys:[],score:0};this.#methods=[n]}this.#patterns=[]}insert(e,t,n){this.#order=++this.#order;let r=this;const i=c(t);const a=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];const n=i[e+1];const o=f(t,n);const s=Array.isArray(o)?o[0]:t;if(s in r.#children){r=r.#children[s];if(o)a.push(o[1]);continue}r.#children[s]=new q;if(o){r.#patterns.push(o);a.push(o[1])}r=r.#children[s]}r.#methods.push({[e]:{handler:n,possibleKeys:a.filter((e,t,n)=>n.indexOf(e)===t),score:this.#order}});return r}#getHandlerSets(e,t,n,r){const i=[];for(let a=0,o=e.#methods.length;a<o;a++){const o=e.#methods[a];const s=o[t]||o[M];const c={};if(s!==void 0){s.params=Object.create(null);i.push(s);if(n!==K||r&&r!==K)for(let e=0,t=s.possibleKeys.length;e<t;e++){const t=s.possibleKeys[e];const i=c[s.score];s.params[t]=r?.[t]&&!i?r[t]:n[t]??r?.[t];c[s.score]=true}}}return i}search(e,t){const n=[];this.#params=K;const r=this;let i=[r];const a=s(t);const o=[];for(let t=0,r=a.length;t<r;t++){const s=a[t];const c=t===r-1;const l=[];for(let r=0,u=i.length;r<u;r++){const u=i[r];const d=u.#children[s];if(d){d.#params=u.#params;if(c){if(d.#children[`*`])n.push(...this.#getHandlerSets(d.#children[`*`],e,u.#params));n.push(...this.#getHandlerSets(d,e,u.#params))}else l.push(d)}for(let r=0,i=u.#patterns.length;r<i;r++){const i=u.#patterns[r];const d=u.#params===K?{}:{...u.#params};if(i===`*`){const t=u.#children[`*`];if(t){n.push(...this.#getHandlerSets(t,e,u.#params));t.#params=d;l.push(t)}continue}if(!s)continue;const[f,p,m]=i;const h=u.#children[f];const g=a.slice(t).join(`/`);if(m instanceof RegExp){const t=m.exec(g);if(t){d[p]=t[0];n.push(...this.#getHandlerSets(h,e,u.#params,d));if(Object.keys(h.#children).length){h.#params=d;const e=t[0].match(/\//)?.length??0;const n=o[e]||=[];n.push(h)}continue}}if(m===true||m.test(s)){d[p]=s;if(c){n.push(...this.#getHandlerSets(h,e,d,u.#params));if(h.#children[`*`])n.push(...this.#getHandlerSets(h.#children[`*`],e,d,u.#params))}else{h.#params=d;l.push(h)}}}}i=l.concat(o.shift()??[])}if(n.length>1)n.sort((e,t)=>{return e.score-t.score});return[n.map(({handler:e,params:t})=>[e,t])]}};var J=class{name=`TrieRouter`;#node;constructor(){this.#node=new q}add(e,t,n){const r=v(t);if(r){for(let t=0,i=r.length;t<i;t++)this.#node.insert(e,r[t],n);return}this.#node.insert(e,t,n)}match(e,t){return this.#node.search(e,t)}};var Y=class extends B{constructor(e={}){super(e);this.router=new G({routers:[new W,new J]})}};var X=Object.create(null);var Z=class{name=`PatternRouter`;#routes=[];add(e,t,n){const r=t.at(-1)===`*`;if(r)t=t.slice(0,-2);if(t.at(-1)===`?`){t=t.slice(0,-1);this.add(e,t.replace(/\/[^/]+$/,``),n)}const i=(t.match(/\/?(:\w+(?:{(?:(?:{[\d,]+})|[^}])+})?)|\/?[^\/\?]+/g)||[]).map(e=>{const t=e.match(/^\/:([^{]+)(?:{(.*)})?/);return t?`/(?<${t[1]}>${t[2]||`[^/]+`})`:e===`/*`?`/[^/]+`:e.replace(/[.\\+*[^\]$()]/g,`\\$&`)});try{this.#routes.push([new RegExp(`^${i.join(``)}${r?``:`/?$`}`),e,n])}catch{throw new I}}match(e,t){const n=[];for(let r=0,i=this.#routes.length;r<i;r++){const[i,a,o]=this.#routes[r];if(a===e||a===M){const e=i.exec(t);if(e)n.push([o,e.groups||X])}}return[n]}};new Y({router:new Z}).get(`/`,e=>e.body(`Hi`)).get(`/user/:id`,e=>e.body(e.req.param(`id`))).post(`/body`,async e=>e.json(await e.req.json())).fetch(new Request(`http://127.0.0.1`));