function e(e){if(e===void 0)return{BS_PRIVATE_NESTED_SOME_NONE:0};else if(e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0)return{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0};else return e}function t(e){if(!(e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return e;var t=e.BS_PRIVATE_NESTED_SOME_NONE;if(t===0)return;else return{BS_PRIVATE_NESTED_SOME_NONE:t-1|0}}function n(e){if(Array.isArray(e))return{TAG:`Array`,_0:e};else return{TAG:`Single`,_0:e}}var r={classify:n};var i=new Map;function a(e){var t=i.get(e);var n;if(t!==void 0){var r=t+1|0;i.set(e,r);n=r}else{i.set(e,1);n=1}return e+(`/`+n)}var o={};var s=[];var c=(e=>({...e}));function l(e){var t=0;while(true){var n=t;var r=e[n];if(r===void 0)return`"`+e+`"`;if(r===`"`)return JSON.stringify(e);t=n+1|0;continue}}function u(e){if(e===``)return[];else return JSON.parse(e.split(`"]["`).join(`","`))}var d=`sury`;var f=Symbol(d);var p=Symbol(d+`:item`);var m=a(`Sury.Error`);var h=(e=>`const`in e);function g(e){var t=e.type;switch(t){case`undefined`:return true;case`union`:return e.has[`undefined`];default:return false}}var _={d:void 0,a:`strip`,n:false};var v=class extends Error{constructor(e,t,n){super();this.flag=t;this.code=e;this.path=n}};var y=Object.defineProperty,b=v.prototype;y(b,`message`,{get(){return ne(this)}});y(b,`reason`,{get(){return ee(this)}});y(b,`name`,{value:`SuryError`});y(b,`s`,{value:f});y(b,`_1`,{get(){return this}});y(b,`RE_EXN_ID`,{value:m});var x=function(){},S=Object.create(null);y(S,`with`,{get(){return(e,...t)=>e(this,...t)}});x.prototype=S;function C(e){if(e&&e.s===f)return e;throw e}function w(e,t){return(e&t)!==0}var T=(e=>{let t=new x;for(let n in e)if(n>`a`||n===`$ref`||n===`$defs`)t[n]=e[n];return t});function E(e,t){var n=T(e);var r=n;while(r.to){var i=T(r.to);r.to=i;r=i}t(r);return n}var D=(e=>{for(let t in e)if(Number(t[0]))delete e[t]});function O(e){var t=typeof e;if(t===`number`||t===`function`||t===`boolean`||t===`symbol`)return e.toString();if(t===`string`)return`"`+e+`"`;if(t!==`object`)if(t===`undefined`)return`undefined`;else return e+`n`;if(e===null)return`null`;if(Array.isArray(e)){var n=`[`;for(var r=0,i=e.length;r<i;++r){if(r!==0)n=n+`, `;n=n+O(e[r])}return n+`]`}if(e.constructor!==Object)return Object.prototype.toString.call(e);var a=Object.keys(e);var o=`{ `;for(var s=0,c=a.length;s<c;++s){var l=a[s];var u=e[l];o=o+l+`: `+O(u)+`; `}return o+`}`}function k(e){var t=e.type;var n=e.const;var r=e.name;if(r!==void 0)return r;if(n!==void 0)return O(n);var i=e.format;var a=e.anyOf;if(a!==void 0)return a.map(k).join(` | `);if(i!==void 0)return i;switch(t){case`nan`:return`NaN`;case`instance`:return e.class.name;case`array`:var o=e.additionalItems;var s=e.items;if(typeof o!==`object`)return`[`+s.map(function(e){return k(e.schema)}).join(`, `)+`]`;var c=k(o);return(o.type===`union`?`(`+c+`)`:c)+`[]`;case`object`:var l=e.additionalItems;var u=e.items;if(u.length===0)if(typeof l===`object`)return`{ [key: string]: `+k(l)+`; }`;else return`{}`;else return`{ `+u.map(function(e){return e.location+`: `+k(e.schema)+`;`}).join(` `)+` }`;default:return t}}var A=v;function j(e,t,n){return new v(e,t,n)}function ee(e,t){var n=t!==void 0?t:0;var r=e.code;if(typeof r!==`object`)return`Encountered unexpected async transform or refine. Use parseAsyncOrThrow operation instead`;switch(r.TAG){case`OperationFailed`:return r._0;case`InvalidOperation`:return r.description;case`InvalidType`:var i=r.unionErrors;var a=`Expected `+k(r.expected)+`, received `+O(r.received);if(i!==void 0){var o=`
`+` `.repeat(n<<1);var s={};for(var c=0,l=i.length;c<l;++c){var u=i[c];var d=ee(u,n+1);var f=u.path;var p=f===``?``:`At `+f+`: `;var m=`- `+p+d;if(!s[m]){s[m]=1;a=a+o+m}}}return a;case`ExcessField`:return`Unrecognized key "`+r._0+`"`;case`InvalidJsonSchema`:return k(r._0)+` is not valid JSON`}}function te(e){return ee(e,void 0)}function ne(e){var t=e.flag;var n=`Failed `;if(t&2)n=n+`async `;n=n+(t&1?t&4?`asserting`:`parsing`:`converting`);if(t&8)n=n+` to JSON`+(t&16?` string`:``);var r=e.path;var i=r===``?``:` at `+r;return n+i+`: `+ee(e,void 0)}var re={value:A,constructor:j,reason:te,message:ne};function M(e,t){var n=e.g.e;var r=n.length;n[r]=t;return`e[`+r+`]`}function N(e,t){var n=t.type;switch(n){case`string`:var r=t.const;return l(r);case`bigint`:var i=t.const;return i+`n`;case`undefined`:return`void 0`;case`symbol`:case`function`:case`instance`:break;default:return t.const}var a=t.const;return M(e,a)}function P(e){var t=this;t.l=t.l+`,`+e}function F(e){var t=this;t.l=e;t.a=P}function ie(e,t){var n={c:``,l:``,a:F,v:-1,o:e,f:``,e:[],d:t};n.g=n;return n}function I(e){delete e.a;var t=e.l;if(t===``)return e.f+e.c;else return e.f+`let `+t+`;`+e.c}function L(e){var t=e.v+1;e.v=t;return`v`+t}function R(e){return this.i}function z(e){var t=this;var n=L(e.g);var r=t.i;if(r===``)t.b.a(n);else if(e.a!==void 0)e.a(n+`=`+r);else{e.c=e.c+(n+`=`+r+`;`);e.g.a(n)}t.v=R;t.i=n;return n}function ae(e){var t=L(e.g);e.a(t);return{b:e,v:R,i:t,f:1}}function B(e,t){return e+`:`+t+`,`}function V(e,t){return t+`,`}function H(e,t){return{b:e,v:z,i:``,f:0,j:t?V:B,c:0,p:``}}function U(e,t,n){e[t]=n;if(n.f&2){e.p=e.p+n.i+`,`;e.i=e.i+e.j(t,`a[`+ e.c+++`]`)}else e.i=e.i+e.j(t,n.i)}function W(e,t){var n=Object.keys(t);for(var r=t.j?7:4,i=n.length;r<i;++r){var a=n[r];U(e,a,t[a])}}function G(e,t){e.i=t?`[`+e.i+`]`:`{`+e.i+`}`;if(e.c){e.f=e.f|2;e.i=`Promise.all([`+e.p+`]).then(a=>(`+e.i+`))`}e.f=e.f|1;return e}function oe(e,t,n,r){return t.v(e)+`[`+n+`]=`+r.i}function K(e,t,n){if(t===n)return``;var r=t.v(e);var i=t.f&2;var a=n.f&2;if(i){if(!a)return r+`=Promise.resolve(`+n.i+`)`}else if(a){t.f=t.f|2;return r+`=`+n.i}return r+`=`+n.i}function q(e,t,n){var r=t[n];if(r!==void 0)return r;var i={b:e,v:z,i:t.v(e)+(`[`+n+`]`),f:0};t[n]=i;return i}function se(e,t,n){return t.v(e)+`=`+n}function ce(e,t){return{b:t.b,v:z,i:e+`(`+t.i+`)`,f:0}}function le(e,t,n){if(!(t.f&2))return n(e,t);var r={c:``,l:``,a:F,f:``,g:e.g};var i={b:e,v:R,i:L(r.g),f:0};var a=n(r,i);var o=I(r);return{b:t.b,v:z,i:t.i+`.then(`+i.v(e)+`=>{`+o+`return `+a.i+`})`,f:3}}function ue(e,t,n){throw new v(t,e.g.o,n)}function de(e,t,n){if(t.f&2)return{b:t.b,v:z,i:t.i+`.then(`+M(e,n)+`)`,f:3};else return ce(M(e,n),t)}function fe(e,t,n,r){return M(e,function(r){return ue(e,n(r),t)})+`(`+r+`)`}function J(e,t,n){return M(e,function(){return ue(e,{TAG:`OperationFailed`,_0:t},n)})+`()`}function pe(e,t,n){return{schema:t,fail:function(t,r){var i=r!==void 0?r:``;return ue(e,{TAG:`OperationFailed`,_0:t},n+i)}}}function me(e,t,n){return ue(e,{TAG:`InvalidOperation`,description:n},t)}function he(e,t,n,r,i,a){if(n===``&&r===void 0)return a(e,t,n);try{var o=function(e,t){e.c=t+`.path=`+l(n)+`+`+(r!==void 0?`'["'+`+r+`+'"]'+`:``)+t+`.path`};var s=function(e){return a(e,t,``)};var c=e.c;e.c=``;var u=L(e.g);var d=o(e,u);var f=`if(`+(u+`&&`+u+`.s===s`)+`){`+e.c;e.c=``;var p={c:``,l:``,a:F,f:``,g:e.g};var m=s(p);e.c=e.c+I(p);var h=m.i===t.i&&e.c===``;if(i!==void 0)i(e,m);if(h)return m;var g=m.f&2;var _=t===m?t:i!==void 0?m:{b:e,v:z,i:``,f:g?2:0};var y=d!==void 0?function(t){return f+(t===1?`return `+d.i:K(e,_,d))+(`}else{throw `+u+`}`)}:function(e){return f+`}throw `+u};e.c=c+(`try{`+e.c+(g?se(e,_,m.i+`.catch(`+u+`=>{`+y(1)+`})`):K(e,_,m))+`}catch(`+u+`){`+y(0)+`}`);return _}catch(e){var b=C(e);throw new v(b.code,b.flag,n+`[]`+b.path)}}function ge(e,t,n,r){var i=r?`!==`:`===`;var a=r?`||`:`&&`;var o=r?`!`:``;var s=n.type;switch(s){case`null`:return t+i+`null`;case`undefined`:return t+i+`void 0`;case`nan`:return o+(`Number.isNaN(`+t+`)`);default:var c=n.const;if(c!==void 0)return t+i+N(e,n);switch(s){case`instance`:var l=n.class;var u=t+` instanceof `+M(e,l);if(r)return`!(`+u+`)`;else return u;case`array`:return o+`Array.isArray(`+t+`)`;case`object`:return`typeof `+t+i+`"`+s+`"`+a+o+t;default:return`typeof `+t+i+`"`+s+`"`}}}function _e(e,t,n,r){var i=r?`!==`:`===`;var a=r?`||`:`&&`;var o=r?``:`!`;var s=r?`>`:`<`;var c=r?`<`:`>`;var l=n.type;var u;var d=0;var f=n.const;if(f!==void 0)return``;var p=n.format;if(p!==void 0){if(p===`int32`)return a+t+s+`2147483647`+a+t+c+`-2147483648`+a+t+`%1`+i+`0`;d=2}else d=2;if(d===2)switch(l){case`number`:if(_.n)return``;else return a+o+`Number.isNaN(`+t+`)`;case`array`:case`object`:u=l;break;default:return``}var m=n.additionalItems;var g=n.items;var v=g.length;var y=u===`array`?m===`strip`||m===`strict`?m===`strip`?a+t+`.length`+c+v:a+t+`.length`+i+v:``:m===`strip`?``:a+o+`Array.isArray(`+t+`)`;for(var b=0,x=g.length;b<x;++b){var S=g[b];var C=S.inlinedLocation;var w=S.schema;var T;if(h(w)||n.unnest)T=ge(e,t+(`[`+C+`]`),w,r);else if(w.type===`object`){var E=t+(`[`+C+`]`);T=ge(e,E,w,r)+_e(e,E,w,r)}else T=``;if(T!==``)y=y+a+T}return y}function ve(e,t,n,r){var i=t.type;switch(i){case`never`:case`unknown`:case`union`:case`ref`:return``;default:var a=n.v(e);return`if(`+ge(e,a,t,true)+_e(e,a,t,true)+`){`+fe(e,r,function(e){return{TAG:`InvalidType`,expected:t,received:e}},a)+`}`}}function ye(e,t,n,r,i){var a=t.v(e);return i(e,a,fe(e,n,function(e){return{TAG:`InvalidType`,expected:r,received:e}},a))}function be(e,t,n,r){if(e.g.o&1||h(t)){e.c=e.c+ve(e,t,n,r);return}}function xe(e){return e}var Se=new Set([`unknown`,`nan`,`bigint`,`function`,`instance`,`symbol`]);var Ce=new x;Ce.type=`unknown`;function we(e,t){e[t===`union`||t===`ref`?`unknown`:t]=true}function Y(e,n,r,i){var a={c:``,l:``,a:F,f:``,g:e.g};if(n.$defs)a.g.d=n.$defs;if(!(r.f&1)&&(a.g.o&1||h(n))){if(!n.noValidation)a.f=ve(e,n,r,i);r.f=r.f|1}var o=r;var s=n.$ref;if(s!==void 0){var l=a.g.d;var u=s.slice(8);var d=l[u];var f=n.noValidation?(a.g.o|1)^1:a.g.o;var p=d[f];var m;if(p!==void 0){var g=t(p);m=g===0?M(a,d)+(`[`+f+`]`):M(a,g)}else{d[f]=0;var _=Ee(d,f,a.g.d);d[f]=_;m=M(a,_)}o=he(a,o,i,void 0,void 0,function(e,t,n){var r=ce(m,t);if(d.isAsync===void 0){var i=c(l);i[u]=Ce;De(d,i)}if(d.isAsync)r.f=r.f|2;return r});o.v(a)}var v=n.refiner;if(v!==void 0)o=v(a,o,n,i);var y=n.to;if(y!==void 0){var b=n.parser;if(b!==void 0)o=b(a,o,n,i);else{var x=n.to;var S=h(n);var C=h(x);var w=0;var T=n.type;var E=0;var D=0;var O=x.type;if(S&&C)o={b:a,v:z,i:N(a,x),f:1};else if(!(T===O&&S&&!C)&&O!==`unknown`)switch(T){case`string`:var A=x.type;var j=0;switch(A){case`string`:var ee=x.const;if(ee!==void 0)w=1;break;case`number`:case`bigint`:case`boolean`:case`null`:case`undefined`:case`nan`:j=4;break;default:E=2}if(j===4){var te=x.const;if(C)o=ye(a,o,i,x,function(e,t,n){e.c=e.c+(t+`==="`+te+`"||`+n+`;`);return{b:e,v:z,i:N(e,x),f:1}});else switch(A){case`number`:var ne=x.format;o=ye(a,o,i,x,function(e,t,n){var r={b:e,v:z,i:`+`+t,f:1};var i=r.v(e);e.c=e.c+(ne!==void 0?`(`+_e(e,i,x,true).slice(2)+`)`:`Number.isNaN(`+i+`)`)+(`&&`+n+`;`);return r});break;case`bigint`:o=ye(a,o,i,x,function(e,t,n){var r=ae(e);e.c=e.c+(`try{`+r.i+`=BigInt(`+t+`)}catch(_){`+n+`}`);return r});break;case`boolean`:o=ye(a,o,i,x,function(e,t,n){var r=ae(e);e.c=e.c+(`(`+r.i+`=`+t+`==="true")||`+t+`==="false"||`+n+`;`);return r});break;default:E=2}}break;case`number`:var re=n.format;if(re===`int32`){var P=x.type;if(P===`number`){var ie=x.format;if(ie!==void 0)D=3}else D=3}else D=3;break;case`unknown`:w=1;break;case`bigint`:case`boolean`:case`null`:case`undefined`:case`nan`:D=3;break;default:E=2}if(D===3){var L=n.const;var R=x.type;if(R===`string`)if(S)o={b:a,v:z,i:`"`+L+`"`,f:1};else{var B=0;switch(T){case`number`:case`bigint`:case`boolean`:B=4;break;default:E=2}if(B===4){var V=x.type;if(V===`string`)o={b:a,v:z,i:`""+`+o.i,f:1};else E=2}}else E=2}if(E===2){var H=`Coercion from `+k(n)+` to `+k(x)+` is not supported`;throw new Error(`[Sury] `+H)}if(w===1)o.f=(o.f|1)^1}o=Y(a,y,o,i)}e.c=e.c+I(a);return o}function Te(e,t,n,r){var i=e.type;if(i===`undefined`&&t.type!==`object`||Se.has(i))throw new v({TAG:`InvalidJsonSchema`,_0:t},r,n);if(i===`union`){e.anyOf.forEach(function(e){Te(e,t,n,r)});return}if(!(i===`array`||i===`object`))return;var a=e.additionalItems;var o=e.items;if(o===void 0)return;if(a===`strip`||a===`strict`);else Te(a,t,n,r);o.forEach(function(t){Te(t.schema,e,n+(`[`+t.inlinedLocation+`]`),r)})}function X(e){var t;var n=e;while(n){var r=T(n);var i=r.to;var a=t;if(a!==void 0)r.to=a;else delete r.to;var o=r.parser;var s=r.serializer;if(s!==void 0)r.parser=s;else delete r.parser;if(o!==void 0)r.serializer=o;else delete r.serializer;var c=r.items;if(c!==void 0){var l={};var u=new Array(c.length);for(var d=0,f=c.length;d<f;++d){var p=c[d];var m=X(p.schema);var h=p.location;var g=p.inlinedLocation;var _={schema:m,location:h,inlinedLocation:g};if(p.r)_.r=p.r;l[p.location]=m;u[d]=_}r.items=u;var v=r.properties;if(v!==void 0)r.properties=l}if(typeof r.additionalItems===`object`)r.additionalItems=X(r.additionalItems);var y=r.anyOf;if(y!==void 0){var b={};var x=[];for(var S=0,C=y.length;S<C;++S){var w=y[S];var E=X(w);x.push(E);we(b,E.type)}r.has=b;r.anyOf=x}var D=r.$defs;if(D!==void 0){var O={};for(var k=0,A=Object.keys(D).length;k<A;++k){var j=Object.keys(D)[k];O[j]=X(D[j])}r.$defs=O}t=r;n=i}return t}function Ee(e,t,n){var r=ie(t,n);if(t&8){var i=X(e);Te(i,i,``,t)}var a={b:r,v:R,i:`i`,f:w(t,1)||h(e)?0:1};var o=Y(r,e,a,``);var s=I(r);var c=w(o.f,2);e.isAsync=c;if(s===``&&o===a&&!(t&22))return xe;var l=t&4?`void 0`:o.i;if(t&16)l=`JSON.stringify(`+l+`)`;if(t&2&&!c&&!n)l=`Promise.resolve(`+l+`)`;var u=`i=>{`+s+`return `+l+`}`;return new Function(`e`,`s`,`return `+u)(r.g.e,f)}function De(e,t){try{var n=ie(2,t);var r={b:n,v:R,i:`i`,f:0};var i=Y(n,e,r,``);var a=w(i.f,2);e.isAsync=a;return a}catch(e){C(e);return false}}function Oe(e){while(true){var t=e;var n=t.to;if(n===void 0)return t;e=n;continue}}function Z(e,t){if(t in e)return e[t];var n=Ee(t&32?X(e):e,t,0);e[t]=n;return n}y(S,`~standard`,{get:function(){var e=this;return{version:1,vendor:d,validate:function(t){try{return{value:Z(e,1)(t)}}catch(e){var n=C(e);return{issues:[{message:ne(n),path:n.path===``?void 0:u(n.path)}]}}}}}});function ke(e,t,n,r,i){var a=i!==void 0?i:true;var o=0;var s=0;switch(n){case`Output`:case`Input`:s=1;break;case`Assert`:o=o|4;break;case`Json`:o=o|8;break;case`JsonString`:o=o|24;break}if(s===1&&n===t)throw new Error(`[Sury] Can't compile operation to converting value to self`);if(r!==`Sync`)o=o|2;if(a)o=o|1;if(t===`Output`)o=o|32;var c=Z(e,o);if(t!==`JsonString`)return c;var l=o;return function(e){try{return c(JSON.parse(e))}catch(e){throw new v({TAG:`OperationFailed`,_0:e.message},l,``)}}}function Ae(e,t){return Z(t,1)(e)}function je(e,t){var n;try{n=JSON.parse(e)}catch(e){throw new v({TAG:`OperationFailed`,_0:e.message},1,``)}return Ae(n,t)}function Me(e,t){return Z(t,3)(e)}function Ne(e,t){return Z(t,0)(e)}function Pe(e,t){return Z(t,8)(e)}function Fe(e,t){return Z(t,24)(e)}function Ie(e,t){return Z(t,32)(e)}function Le(e,t){return Z(t,40)(e)}function Re(e,t,n){var r=n!==void 0?n:0;return JSON.stringify(Le(e,t),null,r)}function ze(e,t){return Z(t,5)(e)}var Be=new x;Be.type=`undefined`;Be.const=void 0;var Ve=new x;Ve.type=`null`;Ve.const=null;function He(e){if(e===null)return Ve;var t=typeof e;var n;if(t===`object`){var r=new x;r.type=`instance`;var i=r;i.class=e.constructor;n=i}else if(t===`undefined`)n=Be;else if(t===`number`)if(Number.isNaN(e)){var a=new x;a.type=`nan`;n=a}else{var o=new x;o.type=t;n=o}else{var s=new x;s.type=t;n=s}n.const=e;return n}function Ue(e){if(e&&e.s===f)return{success:false,error:e};throw e}function We(e){try{return{success:true,value:e()}}catch(e){return Ue(e)}}function Ge(e){try{return e().then(function(e){return{success:true,value:e}},Ue)}catch(e){return Promise.resolve(Ue(e))}}function Ke(e,t,n){var r=T(e);r[t]=n;return r}var qe=`#/$defs/`;function Je(e,t){var n=qe+e;var r=new x;r.type=`ref`;r.$ref=n;r.name=e;var i=_.d;if(!i)_.d={};var a=t(r);if(a.name)r.name=a.name;else a.name=e;_.d[e]=a;if(i)return r;var o=new x;o.type=`ref`;o.name=a.name;o.$ref=n;o.$defs=_.d;_.d=void 0;return o}function Ye(e,t){var n=T(e);n.noValidation=t;return n}function Xe(e,t){return E(e,function(e){var n=e.refiner;e.refiner=function(e,r,i,a){return le(e,n!==void 0?n(e,r,i,a):r,function(e,n){var r=t(e,n.v(e),i,a);e.c=e.c+r;return n})}})}function Ze(e,t){return Xe(e,function(e,n,r,i){return M(e,t(pe(e,r,i)))+`(`+n+`);`})}function Q(e,t,n,r){var i=e[t];return Xe(Ke(e,t,i!==void 0?i.concat(n):[n]),r)}function Qe(e,t){return E(e,function(e){e.parser=function(e,n,r,i){var a=t(pe(e,r,i));var o=a.p;if(o!==void 0)if(a.a!==void 0)return me(e,i,`The S.transform doesn't allow parser and asyncParser at the same time. Remove parser in favor of asyncParser`);else return de(e,n,o);var s=a.a;if(s!==void 0){if(!(e.g.o&2))ue(e,`UnexpectedAsync`,``);var c=de(e,n,s);c.f=c.f|2;return c}else if(a.s!==void 0)return me(e,i,`The S.transform parser is missing`);else return n};var n=new x;e.to=(n.type=`unknown`,n.serializer=function(e,n,r,i){var a=t(pe(e,r,i));var o=a.s;if(o!==void 0)return de(e,n,o);else if(a.a!==void 0||a.p!==void 0)return me(e,i,`The S.transform serializer is missing`);else return n},n);delete e.isAsync})}var $e=new x;$e.type=`null`;$e.const=null;$e.to=Be;function et(e,t,n,r){e.c=e.c+fe(e,r,function(e){return{TAG:`InvalidType`,expected:n,received:e}},t.i)+`;`;return t}var tt=new x;tt.type=`never`;tt.refiner=et;function nt(e,t,n,r,i,a){try{var o={c:``,l:``,a:F,f:``,g:e.g};if(i){var s=ve(o,t,n,a);o.c=o.c+s}var c={b:n.b,v:n.v,i:n.i,f:n.f|1};var l=Y(o,t,c,a);if(l!==c){l.b=o;if(t.type===`unknown`){var u=X(t);o.c=o.c+ve(o,u,l,a)}if(l.f&2)r.f=r.f|2;o.c=o.c+(r.v(e)+`=`+l.i)}return I(o)}catch(t){return`throw `+M(e,C(t))}}function rt(e,t){if((e===`array`||e===`instance`)&&t[`object`])return true;else if(e===`nan`)return t[`number`];else return false}function it(e,t,n,r){var i=function(i){return M(e,function(t){var i=arguments;return ue(e,{TAG:`InvalidType`,expected:n,received:i[0],unionErrors:i.length>1?Array.from(i).slice(1):void 0},r)})+`(`+t.v(e)+i+`)`};var a=n.anyOf;var o=e.g.o&1;var s=t.i;var c=-1;var l=a.length-1|0;var u={};var d=[];for(var f=0;f<=l;++f){var p=a[f];var m=p.type;var g=0;switch(m){case`never`:case`unknown`:case`union`:case`ref`:g=1;break;default:var _=m===`instance`?p.class.name:m;var v=u[_];if(v!==void 0){if(m!==`undefined`&&m!==`null`&&m!==`nan`)v.push(p)}else{if(rt(m,u))d.unshift(_);else d.push(_);u[_]=[p]}}if(g===1){c=f;u={};d=[]}}var y=c;var b=u;var x=d;var S=``;var C=``;var w=``;var T=false;if(y!==-1){for(var E=0;E<=y;++E)if(!T){var D=a[E];var O=nt(e,D,t,t,true,r);if(O){var k=`e`+E;S=S+(`try{`+O+`}catch(`+k+`){`);C=`}`+C;w=w+`,`+k}else T=true}}if(!T){var A=false;var j=``;for(var ee=0,te=x.length;ee<te;++ee){var ne=b[x[ee]];var re=ne.length>1;var N=ne[0];var P=0;var ie;if(re){var I=t.v(e);var L=``;var ae=``;var B=false;var V={contents:``};var H=``;var U={};var W=0;var G=ne.length-1|0;while(W<=G){var oe=ne[W];var K=(h(oe)?ge(e,I,oe,false):``)+_e(e,I,oe,false).slice(2);var q=nt(e,oe,t,t,false,r);if(K)if(q){var se=U[K];if(se!==void 0)if(typeof se===`string`)U[K]=[se,q];else se.push(q);else U[K]=q}else V.contents=V.contents?V.contents+`||`+K:K;if(!K||W===G){var ce=Object.keys(U);for(var le=0,de=ce.length;le<de;++le){var fe=ce[le];var J=B?`else if`:`if`;L=L+J+(`(`+fe+`){`);var pe=U[fe];if(typeof pe===`string`)L=L+pe+`}`;else{var me=``;for(var he=0,ve=pe.length;he<ve;++he){var ye=pe[he];var be=`e`+he;L=L+(`try{`+ye+`}catch(`+be+`){`);me=me+`,`+be}L=L+i(me)+`}`.repeat(pe.length)+`}`}B=true}U={}}if(!K)if(q){if(V.contents){var xe=B?`else if`:`if`;L=L+xe+(`(!(`+V.contents+`)){`);ae=`}`+ae;V.contents=``;B=false}var Se=`e`+W;L=L+((B?`else{`:``)+`try{`+q+`}catch(`+Se+`){`);ae=(B?`}`:``)+`}`+ae;H=H+`,`+Se;B=false}else{V.contents=``;W=G}W=W+1}P=function(t){return function(n){return ge(e,n,{type:t.type,parser:0},false)}}(N);if(V.contents)if(L){if(o){var Ce=B?`else if`:`if`;L=L+Ce+(`(!(`+V.contents+`)){`+i(H)+`}`)}}else{var we=P;P=function(e,t){return function(n){return t(n)+(`&&(`+e.contents+`)`)}}(V,we)}else if(o&&L){var Y=i(H);L=L+(B?`else{`+Y+`}`:Y)}ie=L+ae}else{P=function(t){return function(n){return ge(e,n,t,false)+_e(e,n,t,false)}}(N);ie=nt(e,N,t,t,false,r)}if(ie||rt(N.type,b)){var Te=A?`else if`:`if`;S=S+Te+(`(`+P(t.v(e))+`){`+ie+`}`);A=true}else if(o){var X=P(t.v(e));j=j?j+`||`+X:X}}if(o||y===l){var Ee=i(w);var De;if(j){var Oe=A?`else if`:`if`;De=Oe+(`(!(`+j+`)){`+Ee+`}`)}else De=A?`else{`+Ee+`}`:Ee;S=S+De}}e.c=e.c+S+C;if(t.f&2)return{b:e,v:z,i:`Promise.resolve(`+t.i+`)`,f:3};else if(t.v===R)if(e.c===``&&t.b.c===``&&(t.b.l===t.i+`=`+s||s===`i`)){t.b.l=``;t.b.a=F;t.v=z;t.i=s;return t}else return{b:t.b,v:t.v,i:t.i,f:t.f};else return t}function at(e){var t=e.length;if(t===1)return e[0];if(t!==0){var n={};var r=new Set;for(var i=0,a=e.length;i<a;++i){var o=e[i];if(o.type===`union`&&o.to===void 0){o.anyOf.forEach(function(e){r.add(e)});Object.assign(n,o.has)}else{r.add(o);we(n,o.type)}}var s=new x;s.type=`union`;s.anyOf=Array.from(r);s.refiner=it;s.has=n;return s}throw new Error(`[Sury] S.union requires at least one item`)}var ot=`BS_PRIVATE_NESTED_SOME_NONE`;var st=`"`+ot+`"`;function ct(){var e=He(0);var t={schema:e,location:ot,inlinedLocation:st};var n={};n[ot]=e;return{type:`object`,serializer:function(e,t,n,r){return{b:e,v:z,i:N(e,n.to),f:1}},additionalItems:`strip`,items:[t],properties:n}}function lt(e,t,n,r){return{b:e,v:z,i:`{`+st+`:`+Oe(n).items[0].schema.const+`}`,f:1}}function ut(e){return E(e,function(e){e.to=ct();e.parser=lt})}function dt(e,t){var n=t!==void 0?t:Be;var r=Oe(e);var i=r.type;switch(i){case`undefined`:return at([n,ut(e)]);case`union`:var a=r.has;var o=r.anyOf;return E(e,function(e){var t=c(a);var r=[];for(var i=0,s=o.length;i<s;++i){var l=o[i];var u=Oe(l);var d=u.type;var f;if(d===`undefined`){t[n.type]=true;r.push(n);f=ut(l)}else{var p=u.properties;if(p!==void 0){var m=p[ot];f=m!==void 0?E(l,function(e){return function(t){var n={type:e.type,parser:e.parser,const:e.const+1};var r={schema:n,location:ot,inlinedLocation:st};var i={};i[ot]=n;t.items=[r];t.properties=i}}(m)):l}else f=l}r.push(f)}if(r.length===o.length){t[n.type]=true;r.push(n)}e.anyOf=r;e.has=t});default:return at([e,n])}}function ft(e,t){return E(e,function(e){var n=e.anyOf;if(n!==void 0){var r;var i;for(var a=0,o=n.length;a<o;++a){var s=n[a];var c=Oe(s);var l=c.type;if(l!==`undefined`){var u=r;if(u!==void 0){var d=`Can't set default for `+k(e);throw new Error(`[Sury] `+d)}r=s;i=c}}var f=r;var p;if(f!==void 0)p=f;else{var m=`Can't set default for `+k(e);throw new Error(`[Sury] `+m)}e.parser=function(e,n,r,i){return le(e,n,function(e,n){var r=n.v(e);var i;i=t.TAG===`Value`?N(e,He(t._0)):M(e,t._0)+`()`;return{b:e,v:z,i:r+`===void 0?`+i+`:`+r,f:1}})};var h=T(i);var g=h.refiner;if(g!==void 0){h.serializer=g;delete h.refiner}else h.serializer=function(e,t,n,r){return t};e.to=h;if(t.TAG!==`Value`)return;try{e.default=Z(p,32)(t._0);return}catch(e){return}}else{var _=`Can't set default for `+k(e);throw new Error(`[Sury] `+_)}})}function pt(e,t){return ft(e,{TAG:`Value`,_0:t})}function mt(e,t){return ft(e,{TAG:`Callback`,_0:t})}var ht=`m:Array.refinements`;function gt(e){var t=e[ht];if(t!==void 0)return t;else return[]}function _t(e,t,n,r){var i=n.additionalItems;var a=t.v(e);var o=L(e.g);var s={c:``,l:``,a:F,f:``,g:e.g};var c={b:s,v:z,i:a+`[`+o+`]`,f:0};var l=he(s,c,r,o,void 0,function(e,t,n){return Y(e,i,t,n)});var u=I(s);var d=c!==l;var f=d?{b:e,v:z,i:`new Array(`+a+`.length)`,f:1}:t;if(d||u!==``)e.c=e.c+(`for(let `+o+`=0;`+o+`<`+a+`.length;++`+o+`){`+u+(d?oe(e,f,o,l):``)+`}`);if(l.f&2)return{b:f.b,v:z,i:`Promise.all(`+f.i+`)`,f:3};else return f}function vt(e){var t=new x;t.type=`array`;t.additionalItems=e;t.items=s;t.refiner=_t;return t}function yt(e,t,n){var r=e.additionalItems;if(r===void 0)return e;var i=e.items;if(!(r!==t&&typeof r!==`object`))return e;var a=T(e);a.additionalItems=t;if(n){var o=[];var s={};for(var c=0,l=i.length;c<l;++c){var u=i[c];var d=yt(u.schema,t,n);var f=d===u.schema?u:{schema:d,location:u.location,inlinedLocation:u.inlinedLocation};s[u.location]=d;o.push(f)}a.items=o;a.properties=s}return a}function bt(e){return yt(e,`strip`,false)}function xt(e){return yt(e,`strip`,true)}function St(e){return yt(e,`strict`,false)}function Ct(e){return yt(e,`strict`,true)}function wt(e,t,n,r){var i=n.additionalItems;var a=t.v(e);var o=L(e.g);var s={c:``,l:``,a:F,f:``,g:e.g};var c={b:s,v:z,i:a+`[`+o+`]`,f:0};var l=he(s,c,r,o,void 0,function(e,t,n){return Y(e,i,t,n)});var u=I(s);var d=c!==l;var f=d?{b:e,v:z,i:`{}`,f:1}:t;if(d||u!==``)e.c=e.c+(`for(let `+o+` in `+a+`){`+u+(d?oe(e,f,o,l):``)+`}`);if(!(l.f&2))return f;var p=L(e.g);var m=L(e.g);var h=L(e.g);var g=L(e.g);var _=f.v(e);return{b:e,v:z,i:`new Promise((`+p+`,`+m+`)=>{let `+g+`=Object.keys(`+_+`).length;for(let `+o+` in `+_+`){`+_+`[`+o+`].then(`+h+`=>{`+_+`[`+o+`]=`+h+`;if(`+g+`--===1){`+p+`(`+_+`)}},`+m+`)}})`,f:3}}function Tt(e){var t=new x;t.type=`object`;t.properties=o;t.items=s;t.additionalItems=e;t.refiner=wt;return t}var Et=`m:String.refinements`;function Dt(e){var t=e[Et];if(t!==void 0)return t;else return[]}var Ot=/^c[^\s-]{8,}$/i;var kt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;var At=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;var jt=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/;var Mt=new x;Mt.type=`string`;function Nt(e,t){var n=t!==void 0?t:0;var r=new x;r.type=`string`;r.parser=function(t,n,r,i){var a=ae(t);t.c=t.c+(`try{`+a.i+`=JSON.parse(`+n.i+`)}catch(t){`+fe(t,i,function(e){return{TAG:`OperationFailed`,_0:e}},`t.message`)+`}`);be(t,e,a,i);return a};var i=T(e);i.serializer=function(e,t,r,i){Te(r,r,``,e.g.o);return{b:e,v:z,i:`JSON.stringify(`+t.i+(n>0?`,null,`+n:``)+`)`,f:1}};r.to=i;return r}var Pt=new x;Pt.type=`boolean`;var Ft=new x;Ft.type=`symbol`;var It=`m:Int.refinements`;function Lt(e){var t=e[It];if(t!==void 0)return t;else return[]}var Rt=new x;Rt.type=`number`;Rt.format=`int32`;var zt=`m:Float.refinements`;function Bt(e){var t=e[zt];if(t!==void 0)return t;else return[]}var Vt=new x;Vt.type=`number`;var Ht=new x;Ht.type=`bigint`;function Ut(e,t){if(e===t)return e;var n=t.anyOf;if(n!==void 0)return at(n.map(function(t){return Ut(e,t)}));else return E(e,function(e){e.to=t})}function Wt(e){var t=new x;t.type=`instance`;t.class=e;return t}function Gt(e,t){var n=T(e);var r=t.name;if(r!==void 0)if(r===``)n.name=void 0;else n.name=r;var i=t.title;if(i!==void 0)if(i===``)n.title=void 0;else n.title=i;var a=t.description;if(a!==void 0)if(a===``)n.description=void 0;else n.description=a;var o=t.deprecated;if(o!==void 0)n.deprecated=o;var s=t.examples;if(s!==void 0)if(s.length!==0)n.examples=s.map(Z(e,32));else n.examples=void 0;return n}function Kt(e){switch(e.k){case 0:return`[`+e.inlinedLocation+`]`;case 1:return Kt(e.of)+e.p;case 2:return e.p}}function qt(e,t,n){if(!(typeof t===`object`&&t!==null))return{b:e,v:R,i:M(e,t),f:1};var r=t[p];if(r!==void 0)return n(r);var i=Array.isArray(t);var a=Object.keys(t);var o=H(e,i);for(var s=0,c=a.length;s<c;++s){var u=a[s];U(o,i?`"`+u+`"`:l(u),qt(e,t[u],n))}return G(o,i)}function Jt(e,t,n,r,i){if(!(r.type===`object`&&r.additionalItems===`strict`&&e.g.o&1))return;var a=ae(e);var o=a.i;e.c=e.c+(`for(`+o+` in `+t.v(e)+`){if(`);if(n.length!==0)for(var s=0,c=n.length;s<c;++s){var l=n[s];if(s!==0)e.c=e.c+`&&`;e.c=e.c+(o+`!==`+l.inlinedLocation)}else e.c=e.c+`true`;e.c=e.c+(`){`+fe(e,i,function(e){return{TAG:`ExcessField`,_0:e}},o)+`}}`)}function Yt(e){return new Proxy(o,{get:function(t,n){if(n===p)return e;var r=l(n);var i=Oe(e.schema);var a=i.items;var o=i.properties;var s;if(o!==void 0)s=o[n];else if(a!==void 0){var c=a[n];s=c!==void 0?c.schema:void 0}else s=void 0;if(s===void 0){var u=`Cannot read property `+r+` of `+k(i);throw new Error(`[Sury] `+u)}return Yt({k:1,inlinedLocation:r,location:n,schema:s,of:e,p:`[`+r+`]`})}})}function Xt(e,t,n,r){var i=n.additionalItems;var a=n.items;var o=n.type===`array`;if(e.g.o&64){var s=H(e,o);for(var c=0,l=a.length;c<l;++c){var u=a[c];var d=u.inlinedLocation;U(s,d,t[d])}return G(s,o)}var f=H(e,o);for(var p=0,m=a.length;p<m;++p){var g=a[p];var _=g.inlinedLocation;var v=g.schema;var y=q(e,t,_);var b=r+(`[`+_+`]`);if(t.f&1&&(h(v)||v.type===`object`))y.f=y.f|1;U(f,_,Y(e,v,y,b))}Jt(e,t,a,n,r);if((i!==`strip`||e.g.o&32)&&a.every(function(e){return f[e.inlinedLocation]===t[e.inlinedLocation]}))return t;else return G(f,o)}function Zt(e,t,n){if(!(typeof e===`object`&&e!==null))return{k:1,p:t,s:T(He(e))};var r=e[p];if(r!==void 0){var i=T(Oe(r.schema));delete i.serializer;var a={k:0,p:t,s:i};r.r=a;n[Kt(r)]=a;return a}if(Array.isArray(e)){var o=[];for(var s=0,c=e.length;s<c;++s){var u=s.toString();var d=`"`+u+`"`;var f=Zt(e[s],t+(`[`+d+`]`),n);var m=f.s;var h={schema:m,location:u,inlinedLocation:d};o[s]=h}var g=new x;return{k:2,p:t,s:(g.type=`array`,g.items=o,g.additionalItems=`strict`,g.serializer=et,g)}}var v=Object.keys(e);var y={};var b=[];for(var S=0,C=v.length;S<C;++S){var w=v[S];var E=l(w);var D=Zt(e[w],t+(`[`+E+`]`),n);var O=D.s;var k={schema:O,location:w,inlinedLocation:E};b[S]=k;y[w]=O}var A=new x;return{k:2,p:t,s:(A.type=`object`,A.items=b,A.properties=y,A.additionalItems=_.a,A.serializer=et,A)}}function Qt(e){if(!(typeof e===`object`&&e!==null))return He(e);if(e[`~standard`])return e;if(Array.isArray(e)){for(var t=0,n=e.length;t<n;++t){var r=Qt(e[t]);var i=t.toString();var a=`"`+i+`"`;e[t]={schema:r,location:i,inlinedLocation:a}}var o=new x;o.type=`array`;o.items=e;o.additionalItems=`strict`;o.refiner=Xt;return o}var s=e.constructor;if(s&&s!==Object)return{type:`instance`,const:e,class:s};var c=Object.keys(e);var u=c.length;var d=[];for(var f=0;f<u;++f){var p=c[f];var m=l(p);var h=Qt(e[p]);var g={schema:h,location:p,inlinedLocation:m};e[p]=h;d[f]=g}var v=new x;v.type=`object`;v.items=d;v.properties=e;v.additionalItems=_.a;v.refiner=Xt;return v}function $t(e){var n=this;var r=`~`+e;var i=n[r];if(i!==void 0)return t(i);var a={};var o=[];var s=new x;s.type=`object`;s.items=o;s.properties=a;s.additionalItems=_.a;s.refiner=Xt;var c=n.f(e,s)[p];var u=function(e,t){var n=l(e);if(a[e])throw new Error(`[Sury] `+(`The field `+n+` defined twice`));var r=`[`+n+`]`;var i={k:1,inlinedLocation:n,location:e,schema:t,of:c,p:r};a[e]=t;o.push(i);return Yt(i)};var d=function(e,t){u(e,Qt(t))};var f=function(e,t,n){return u(e,pt(dt(t,void 0),n))};var m=function(e){var t=e.type;if(t===`object`){var n=e.to;var r=e.items;if(n){var i=`Unsupported nested flatten for transformed object schema `+k(e);throw new Error(`[Sury] `+i)}var a={};for(var o=0,s=r.length;o<s;++o){var c=r[o];a[c.location]=u(c.location,c.schema)}return a}var l=`Can't flatten `+k(e)+` schema`;throw new Error(`[Sury] `+l)};var h={field:u,f:u,fieldOr:f,tag:d,nested:$t,flatten:m};n[r]=h;return h}function en(e,t){return function(n,r,i,a){var o=n.g.o&64;var s=o?r:{};if(!o){var c=i.items;for(var l=0,u=c.length;l<u;++l){var d=c[l];var f=d.inlinedLocation;var p=d.schema;var m=q(n,r,f);var g=a+(`[`+f+`]`);if(r.f&1&&(h(p)||p.type===`object`))m.f=m.f|1;s[f]=Y(n,p,m,g)}Jt(n,r,c,i,a)}if(t!==void 0){var _=n.g.o;n.g.o=_|64;for(var v=0,y=t.length;v<y;++v){var b=t[v];s[b.i]=Y(n,b.schema,r,a)}n.g.o=_}var x=function(e){switch(e.k){case 0:return s[e.inlinedLocation];case 1:return q(n,x(e.of),e.inlinedLocation);case 2:return s[e.i]}};return qt(n,e,x)}}function tn(e,t,n){var r={};var i=Zt(e,``,r);var a=i.s;delete a.refiner;a.serializer=function(e,i,a,o){var s=function(n){if(n.p===``)return i;else return{b:e,v:z,i:i.v(e)+n.p,f:t?0:1}};var c=function(t,n){var i=Oe(t);if(h(i))return{b:e,v:z,i:N(e,i),f:1};if(h(t))return Y(e,t,{b:e,v:z,i:N(e,t),f:1},o);var a=i.type;var l=i.additionalItems;var u=i.items;if(u!==void 0&&typeof l===`string`){var d=a===`array`;var f=H(e,d);for(var p=0,m=u.length;p<m;++p){var g=u[p];var _=n+(`[`+g.inlinedLocation+`]`);var v=r[_];var y=v!==void 0?Y(e,g.schema,s(v),v.p):c(g.schema,_);U(f,g.inlinedLocation,y)}return G(f,d)}var b=n===``?`Schema isn't registered`:`Schema for `+n+` isn't registered`;return me(e,o,b)};var l=function(t,n,r){var i=t.r;if(i===void 0)return c(t.schema,n);var a=r?X(t.schema):n===``?Oe(t.schema):t.schema;var l=s(i);var u=o+i.p;if(i.p!==``&&e.g.o&1&&!h(a)&&a.type!==`object`)e.c=e.c+ve(e,a,l,u);return Y(e,a,l,u)};if(t!==void 0)return l(t,``,false);var u=a.to;Jt(e,i,a.items,a,o);var d=u.type===`array`;var f=u.items;var p=H(e,d);if(n!==void 0)for(var m=0,g=n.length;m<g;++m)W(p,l(n[m],``,true));for(var _=0,v=f.length;_<v;++_){var y=f[_];if(!p[y.inlinedLocation])U(p,y.inlinedLocation,l(y,`[`+y.inlinedLocation+`]`,false))}return G(p,d)};return a}function nn(e,t){return E(e,function(n){var r={k:2,schema:e,p:``,i:0};var i=t(Yt(r));n.parser=function(e,t,n,r){var a=function(n){switch(n.k){case 1:return q(e,a(n.of),n.inlinedLocation);case 0:case 2:return t}};return qt(e,i,a)};n.to=tn(i,r,void 0)})}function rn(e){var t=void 0;var n=[];var r={};var i=function(e){var i=e.type;if(i===`object`){var a=e.items;for(var o=0,s=a.length;o<s;++o){var c=a[o];var l=c.inlinedLocation;var u=c.location;var d=c.schema;var f=r[u];if(f!==void 0){if(f!==d)throw new Error(`[Sury] `+(`The field `+l+` defined twice with incompatible schemas`))}else{var p={k:0,schema:d,inlinedLocation:l,location:u};n.push(p);r[u]=d}}var m=t||(t=[]);var h=m.length;var g={k:2,schema:e,p:``,i:h};m.push(g);return Yt(g)}var _=`The '`+k(e)+`' schema can't be flattened`;throw new Error(`[Sury] `+_)};var a=function(e,t){var i=l(e);if(r[e])throw new Error(`[Sury] `+(`The field `+i+` defined twice with incompatible schemas`));var a={k:0,schema:t,inlinedLocation:i,location:e};r[e]=t;n.push(a);return Yt(a)};var o=function(e,t){a(e,Qt(t))};var s=function(e,t,n){return a(e,pt(dt(t,void 0),n))};var c={field:a,f:a,fieldOr:s,tag:o,nested:$t,flatten:i};var u=e(c);var d=new x;d.type=`object`;d.items=n;d.properties=r;d.additionalItems=_.a;d.parser=en(u,t);d.to=tn(u,void 0,t);return d}function an(e){var t=[];var n=function(e,n){var r=e.toString();var i=`"`+r+`"`;if(t[e])throw new Error(`[Sury] `+(`The item [`+i+`] is defined multiple times`));var a={k:0,schema:n,inlinedLocation:i,location:r};t[e]=a;return Yt(a)};var r=function(e,t){n(e,Qt(t))};var i={item:n,tag:r};var a=e(i);for(var o=0,s=t.length;o<s;++o)if(!t[o]){var c=o.toString();var l=`"`+c+`"`;var u={schema:Be,location:c,inlinedLocation:l};t[o]=u}var d=new x;d.type=`array`;d.items=t;d.additionalItems=`strict`;d.parser=en(a,void 0);d.to=tn(a,void 0,void 0);return d}function on(e){return e}var sn={m:on};function cn(e){return Qt(e(sn))}function ln(e){return dt(e,$e)}function un(e){return Qt(e)}function dn(e,t,n,r){var i=n.additionalItems;var a=i.items;var o=t.v(e);var s=L(e.g);var c=L(e.g);var l={c:``,l:``,a:F,f:``,g:e.g};var u={b:l,v:R,i:o+`[`+s+`]`,f:0};var d=he(l,u,r,s,function(t,n){var r=``;var i=``;for(var l=0,u=a.length;l<u;++l){var d=a[l];r=r+(`new Array(`+o+`.length),`);i=i+(c+`[`+l+`][`+s+`]=`+q(e,n,d.inlinedLocation).i+`;`)}e.a(c+`=[`+r+`]`);t.c=t.c+i},function(e,t,n){return Y(e,i,t,n)});var f=I(l);e.c=e.c+(`for(let `+s+`=0;`+s+`<`+o+`.length;++`+s+`){`+f+`}`);if(d.f&2)return{b:e,v:z,i:`Promise.all(`+c+`)`,f:3};else return{b:e,v:R,i:c,f:1}}function fn(e){if(e.type===`object`){var t=e.items;if(t.length===0)throw new Error(`[Sury] Invalid empty object for S.unnest schema.`);var n=new x;n.type=`array`;n.items=t.map(function(e,t){var n=t.toString();return{schema:vt(e.schema),location:n,inlinedLocation:`"`+n+`"`}});n.additionalItems=`strict`;n.parser=function(n,r,i,a){var o=r.v(n);var s=L(n.g);var c={c:``,l:``,a:F,f:``,g:n.g};var l=H(c,false);var u=``;for(var d=0,f=t.length;d<f;++d){var p=t[d];U(l,p.inlinedLocation,{b:c,v:z,i:o+`[`+d+`][`+s+`]`,f:0});u=u+(o+`[`+d+`].length,`)}var m={b:n,v:z,i:`new Array(Math.max(`+u+`))`,f:1};var h=m.v(n);var g=he(c,G(l,false),a,s,function(e,t){e.c=e.c+oe(e,m,s,t)+`;`},function(t,n,r){return Y(t,e,n,r)});var _=I(c);n.c=n.c+(`for(let `+s+`=0;`+s+`<`+h+`.length;++`+s+`){`+_+`}`);if(g.f&2)return{b:m.b,v:z,i:`Promise.all(`+m.i+`)`,f:3};else return m};var r=new x;r.type=`array`;r.items=s;r.additionalItems=e;r.serializer=dn;n.unnest=true;n.to=r;return n}throw new Error(`[Sury] S.unnest supports only object schemas.`)}var pn=`JSON`;var mn=new x;mn.type=`ref`;mn.$ref=qe+pn;mn.name=pn;var $=new x;$.type=mn.type;$.$ref=mn.$ref;$.name=pn;var hn={};hn[pn]={type:`union`,refiner:it,name:pn,has:{string:true,boolean:true,number:true,null:true,object:true,array:true},anyOf:[Mt,Pt,Vt,Ve,Tt(mn),vt(mn)]};$.$defs=hn;function gn(e,t,n){var r=n!==void 0?n:`Number must be greater than or equal to `+t;return Q(e,It,{kind:{TAG:`Min`,value:t},message:r},function(e,n,i,a){return`if(`+n+`<`+M(e,t)+`){`+J(e,r,a)+`}`})}function _n(e,t,n){var r=n!==void 0?n:`Number must be lower than or equal to `+t;return Q(e,It,{kind:{TAG:`Max`,value:t},message:r},function(e,n,i,a){return`if(`+n+`>`+M(e,t)+`){`+J(e,r,a)+`}`})}function vn(e,t){var n=Xe(e,function(e,n,r,i){return n+`>0&&`+n+`<65536&&`+n+`%1===0||`+(t!==void 0?J(e,t,i):fe(e,i,function(e){return{TAG:`InvalidType`,expected:r,received:e}},n))+`;`});n.format=`port`;X(n).format=`port`;return n}function yn(e,t,n){var r=n!==void 0?n:`Number must be greater than or equal to `+t;return Q(e,zt,{kind:{TAG:`Min`,value:t},message:r},function(e,n,i,a){return`if(`+n+`<`+M(e,t)+`){`+J(e,r,a)+`}`})}function bn(e,t,n){var r=n!==void 0?n:`Number must be lower than or equal to `+t;return Q(e,zt,{kind:{TAG:`Max`,value:t},message:r},function(e,n,i,a){return`if(`+n+`>`+M(e,t)+`){`+J(e,r,a)+`}`})}function xn(e,t,n){var r=n!==void 0?n:`Array must be `+t+` or more items long`;return Q(e,ht,{kind:{TAG:`Min`,length:t},message:r},function(e,n,i,a){return`if(`+n+`.length<`+M(e,t)+`){`+J(e,r,a)+`}`})}function Sn(e,t,n){var r=n!==void 0?n:`Array must be `+t+` or fewer items long`;return Q(e,ht,{kind:{TAG:`Max`,length:t},message:r},function(e,n,i,a){return`if(`+n+`.length>`+M(e,t)+`){`+J(e,r,a)+`}`})}function Cn(e,t,n){var r=n!==void 0?n:`String must be `+t+` or more characters long`;return Q(e,Et,{kind:{TAG:`Min`,length:t},message:r},function(e,n,i,a){return`if(`+n+`.length<`+M(e,t)+`){`+J(e,r,a)+`}`})}function wn(e,t,n){var r=n!==void 0?n:`String must be `+t+` or fewer characters long`;return Q(e,Et,{kind:{TAG:`Max`,length:t},message:r},function(e,n,i,a){return`if(`+n+`.length>`+M(e,t)+`){`+J(e,r,a)+`}`})}function Tn(e,t){var n=t!==void 0?t:`Invalid email address`;return Q(e,Et,{kind:`Email`,message:n},function(e,t,r,i){return`if(!`+M(e,At)+`.test(`+t+`)){`+J(e,n,i)+`}`})}function En(e,t){var n=t!==void 0?t:`Invalid UUID`;return Q(e,Et,{kind:`Uuid`,message:n},function(e,t,r,i){return`if(!`+M(e,kt)+`.test(`+t+`)){`+J(e,n,i)+`}`})}function Dn(e,t){var n=t!==void 0?t:`Invalid CUID`;return Q(e,Et,{kind:`Cuid`,message:n},function(e,t,r,i){return`if(!`+M(e,Ot)+`.test(`+t+`)){`+J(e,n,i)+`}`})}function On(e,t){var n=t!==void 0?t:`Invalid url`;return Q(e,Et,{kind:`Url`,message:n},function(e,t,r,i){return`try{new URL(`+t+`)}catch(_){`+J(e,n,i)+`}`})}function kn(e,t,n){var r=n!==void 0?n:`Invalid`;return Q(e,Et,{kind:{TAG:`Pattern`,re:t},message:r},function(e,n,i,a){var o={b:e,v:R,i:M(e,t),f:1};return o.i+`.lastIndex=0;if(!`+o.i+`.test(`+n+`)){`+J(e,r,a)+`}`})}function An(e,t){var n=t!==void 0?t:`Invalid datetime string! Expected UTC`;var r={kind:`Datetime`,message:n};var i=e[Et];return Qe(Ke(e,Et,i!==void 0?i.concat(r):[r]),function(e){return{p:function(t){if(!jt.test(t))e.fail(n,void 0);return new Date(t)},s:function(e){return e.toISOString()}}})}function jn(e){var t=function(e){return e.trim()};return Qe(e,function(e){return{p:t,s:t}})}function Mn(e){return at([e,Be,Ve])}function Nn(e){return at(e.map(Qt))}function Pn(e,t,n){return Qe(e,function(e){return{p:t!==void 0?function(n){return t(n,e)}:void 0,s:n!==void 0?function(t){return n(t,e)}:void 0}})}function Fn(e,t){return Ze(e,function(e){return function(n){t(n,e)}})}function In(e){return e}function Ln(e,t){return Qe(e,function(e){return{a:function(n){return t(n,e).then(function(){return n})},s:In}})}function Rn(e,n){var r=at([e,Be]);if(n===void 0)return r;var i=t(n);if(typeof i===`function`)return mt(r,i);else return pt(r,i)}function zn(e,n){var r=at([e,$e]);if(n===void 0)return r;var i=t(n);if(typeof i===`function`)return mt(r,i);else return pt(r,i)}function Bn(e,t){var n;if(e.type===`object`&&t.type===`object`){var r=e.additionalItems;if(typeof r===`string`&&typeof t.additionalItems===`string`&&!e.to&&!t.to){var i=t.items;var a=e.items;var o={};var s=[];var c=[];var l=[];for(var u=0,d=a.length;u<d;++u){var f=a[u];s.push(f.location);c.push(f.inlinedLocation);o[f.location]=f.schema}for(var p=0,m=i.length;p<m;++p){var h=i[p];if(!o[h.location]){s.push(h.location);c.push(h.inlinedLocation)}o[h.location]=h.schema}for(var g=0,_=s.length;g<_;++g){var v=s[g];l.push({schema:o[v],location:v,inlinedLocation:c[g]})}var y=new x;y.type=`object`;y.items=l;y.properties=o;y.additionalItems=r;y.refiner=Xt;n=y}else n=void 0}else n=void 0;if(n!==void 0)return n;throw new Error(`[Sury] The merge supports only structured object schemas without transformations`)}function Vn(e){var t=e.defaultAdditionalItems;_.a=t!==void 0?t:`strip`;var n=_.n;var r=e.disableNanNumberValidation;_.n=r!==void 0?r:false;if(n!==_.n)return D(Vt)}var Hn=`m:JSONSchema`;function Un(n,r){var i={};switch(n.type){case`never`:i.not={};break;case`unknown`:break;case`string`:var a=n.const;i.type=`string`;Dt(n).forEach(function(e){var t=e.kind;if(typeof t!==`object`)switch(t){case`Email`:i.format=`email`;return;case`Uuid`:i.format=`uuid`;return;case`Cuid`:return;case`Url`:i.format=`uri`;return;case`Datetime`:i.format=`date-time`;return}else switch(t.TAG){case`Min`:i.minLength=t.length;return;case`Max`:i.maxLength=t.length;return;case`Length`:var n=t.length;i.minLength=n;i.maxLength=n;return;case`Pattern`:i.pattern=String(t.re);return}});if(a!==void 0)i.const=a;break;case`number`:var o=n.format;var s=n.const;if(o!==void 0)if(o===`int32`){i.type=`integer`;Lt(n).forEach(function(e){var t=e.kind;if(t.TAG===`Min`)i.minimum=t.value;else i.maximum=t.value})}else{i.type=`integer`;i.maximum=65535;i.minimum=0}else{i.type=`number`;Bt(n).forEach(function(e){var t=e.kind;if(t.TAG===`Min`)i.minimum=t.value;else i.maximum=t.value})}if(s!==void 0)i.const=s;break;case`boolean`:var c=n.const;i.type=`boolean`;if(c!==void 0)i.const=c;break;case`null`:i.type=`null`;break;case`array`:var l=n.additionalItems;var u=0;if(l===`strip`||l===`strict`)u=1;else{i.items=e(Un(l,r));i.type=`array`;gt(n).forEach(function(e){var t=e.kind;switch(t.TAG){case`Min`:i.minItems=t.length;return;case`Max`:i.maxItems=t.length;return;case`Length`:var n=t.length;i.maxItems=n;i.minItems=n;return}})}if(u===1){var d=n.items.map(function(e){return Un(e.schema,r)});var f=d.length;i.items=e(d);i.type=`array`;i.minItems=f;i.maxItems=f}break;case`object`:var p=n.additionalItems;var m=0;if(p===`strip`||p===`strict`)m=1;else{i.type=`object`;i.additionalProperties=e(Un(p,r))}if(m===1){var _={};var v=[];n.items.forEach(function(e){var t=Un(e.schema,r);if(!g(e.schema))v.push(e.location);_[e.location]=t});var y;y=(p===`strip`||p===`strict`)&&p!==`strip`?false:true;i.type=`object`;i.properties=_;i.additionalProperties=e(y);if(v.length!==0)i.required=v}break;case`union`:var b=[];var x=[];n.anyOf.forEach(function(e){if(e.type===`undefined`)return;x.push(Un(e,r));if(h(e)){b.push(e.const);return}});var S=x.length;var C=n.default;if(C!==void 0)i.default=t(C);if(S===1)Object.assign(i,x[0]);else if(b.length===S)i.enum=b;else i.anyOf=x;break;case`ref`:var w=n.$ref;if(w===qe+pn);else i.$ref=w;break;default:throw new Error(`[Sury] Unexpected schema type`)}var T=n.description;if(T!==void 0)i.description=T;var E=n.title;if(E!==void 0)i.title=E;var D=n.deprecated;if(D!==void 0)i.deprecated=D;var O=n.examples;if(O!==void 0)i.examples=O;var k=n.$defs;if(k!==void 0)Object.assign(r,k);var A=n[Hn];if(A!==void 0)Object.assign(i,A);return i}function Wn(e){Te(e,e,``,8);var t={};var n=Un(e,t);delete t.JSON;var r=Object.keys(t);if(r.length){r.forEach(function(e){t[e]=Un(t[e],0)});n.$defs=t}return n}function Gn(e,t){var n=e[Hn];return Ke(e,Hn,n!==void 0?Object.assign({},n,t):t)}function Kn(e){return He(e)}function qn(e){var t=e.minimum;var n;if(t!==void 0)n=gn(Rt,t|0,void 0);else{var r=e.exclusiveMinimum;n=r!==void 0?gn(Rt,r+1|0,void 0):Rt}var i=e.maximum;if(i!==void 0)return _n(n,i|0,void 0);var a=e.exclusiveMinimum;if(a!==void 0)return _n(n,a-1|0,void 0);else return n}function Jn(e){if(typeof e===`object`)return e.default}function Yn(n){var i=function(e){if(typeof e===`object`)return Yn(e);else return $};var a=n.type;var o;var s=0;var c=0;if(n.nullable)o=ln(Yn(Object.assign({},n,{nullable:false})));else if(a!==void 0){var l=t(a);if(l===`object`){var u=n.properties;if(u!==void 0){var d=rn(function(e){var t={};Object.keys(u).forEach(function(r){var a=u[r];var o=i(a);var s=n.required;var c;var l=0;if(s!==void 0&&s.includes(r))c=o;else l=1;if(l===1){var d=Jn(a);c=d!==void 0?pt(dt(o),d):dt(o)}t[r]=e.f(r,c)});return t});var f=n.additionalProperties;o=f!==void 0&&t(f)===false?St(d):d}else{var p=n.additionalProperties;if(p!==void 0){var m=t(p);o=typeof m===`object`?Tt(Yn(m)):m?Tt($):St(rn(function(e){}))}else o=cn(function(e){})}}else if(l===`array`){var h=n.items;var g;if(h!==void 0){var _=r.classify(t(h));if(_.TAG===`Single`)g=vt(i(_._0));else{var v=_._0;g=an(function(e){return v.map(function(t,n){return e.item(n,i(t))})})}}else g=vt($);var y=n.minItems;var b=y!==void 0?xn(g,y,void 0):g;var x=n.maxItems;o=x!==void 0?Sn(b,x,void 0):b}else c=2}else c=2;if(c===2){var S=n.enum;var C=n.allOf;var w=n.anyOf;if(w!==void 0){var T=w.length;if(T!==1)o=T!==0?at(w.map(i)):$;else{var E=w[0];o=i(E)}}else if(C!==void 0){var D=C.length;if(D!==1)o=D!==0?Ze($,function(e){return function(t){C.forEach(function(n){try{return ze(t,i(n))}catch(t){return e.fail(`Should pass for all schemas of the allOf property.`,void 0)}})}}):$;else{var O=C[0];o=i(O)}}else{var k=n.oneOf;if(k!==void 0){var A=k.length;if(A!==1)o=A!==0?Ze($,function(e){return function(t){var n={contents:false};k.forEach(function(r){var a;try{ze(t,i(r));a=true}catch(e){a=false}if(a){if(n.contents)e.fail(`Should pass single schema according to the oneOf property.`,void 0);n.contents=true;return}});if(!n.contents)return e.fail(`Should pass at least one schema according to the oneOf property.`,void 0)}}):$;else{var j=k[0];o=i(j)}}else{var ee=n.not;if(ee!==void 0){var te=t(ee);o=Ze($,function(e){return function(t){var n;try{ze(t,i(te));n=true}catch(e){n=false}if(n)return e.fail(`Should NOT be valid against schema in the not property.`,void 0)}})}else if(S!==void 0){var ne=S.length;if(ne!==1)o=ne!==0?at(S.map(Kn)):$;else{var re=S[0];o=He(re)}}else{var M=n.const;if(M!==void 0)o=He(M);else if(a!==void 0){var N=n.multipleOf;var P=t(a);var F=0;var ie=0;var I=n.format;if(Array.isArray(P))o=at(P.map(function(t){return Yn(Object.assign({},n,{type:e(t)}))}));else if(P===`string`){var L=n.pattern;var R=L!==void 0?kn(Mt,new RegExp(L),void 0):Mt;var z=n.minLength;var ae=z!==void 0?Cn(R,z,void 0):R;var B=n.maxLength;var V=B!==void 0?wn(ae,B,void 0):ae;var H=n.format;if(H!==void 0)switch(H){case`date-time`:o=An(V,void 0);break;case`email`:o=Tn(V,void 0);break;case`uri`:o=On(V,void 0);break;case`uuid`:o=En(V,void 0);break;default:o=V}else o=V}else if(P===`integer`||I!==void 0&&I===`int64`&&P===`number`)o=qn(n);else ie=4;if(ie===4)if(N!==void 0&&!(N!==1||P!==`number`))o=qn(n);else F=3;if(F===3)if(P===`number`){var U=n.minimum;var W;if(U!==void 0)W=yn(Vt,U,void 0);else{var G=n.exclusiveMinimum;W=G!==void 0?yn(Vt,G+1,void 0):Vt}var oe=n.maximum;if(oe!==void 0)o=bn(W,oe,void 0);else{var K=n.exclusiveMinimum;o=K!==void 0?bn(W,K-1,void 0):W}}else if(P===`boolean`)o=Pt;else if(P===`null`)o=un(null);else s=1}else s=1}}}}if(s===1){var q=n.if;if(q!==void 0){var se=n.then;if(se!==void 0){var ce=n.else;if(ce!==void 0){var le=i(t(q));var ue=i(t(se));var de=i(t(ce));o=Ze($,function(e){return function(e){var t;try{ze(e,le);t=true}catch(e){t=false}if(t)return ze(e,ue);else return ze(e,de)}})}else o=$}else o=$}else o=$}if(n.description===void 0&&n.deprecated===void 0&&n.examples===void 0&&n.title===void 0)return o;return Gt(o,{title:n.title,description:n.description,deprecated:n.deprecated,examples:n.examples})}function Xn(e,t,n){switch(e.type){case`string`:return Cn(e,t,n);case`number`:if(e.format!==void 0)return gn(e,t,n);else return yn(e,t,n);case`array`:return xn(e,t,n);default:var r=`S.min is not supported for `+k(e)+` schema. Coerce the schema to string, number or array using S.to first.`;throw new Error(`[Sury] `+r)}}function Zn(e,t,n){switch(e.type){case`string`:return wn(e,t,n);case`number`:if(e.format!==void 0)return _n(e,t,n);else return bn(e,t,n);case`array`:return Sn(e,t,n);default:var r=`S.max is not supported for `+k(e)+` schema. Coerce the schema to string, number or array using S.to first.`;throw new Error(`[Sury] `+r)}}function Qn(e,t,n){switch(e.type){case`string`:var r=n!==void 0?n:`String must be exactly `+t+` characters long`;return Q(e,Et,{kind:{TAG:`Length`,length:t},message:r},function(e,n,i,a){return`if(`+n+`.length!==`+M(e,t)+`){`+J(e,r,a)+`}`});case`array`:var i=n!==void 0?n:`Array must be exactly `+t+` items long`;return Q(e,ht,{kind:{TAG:`Length`,length:t},message:i},function(e,n,r,a){return`if(`+n+`.length!==`+M(e,t)+`){`+J(e,i,a)+`}`});default:var a=`S.length is not supported for `+k(e)+` schema. Coerce the schema to string or array using S.to first.`;throw new Error(`[Sury] `+a)}}var $n=Mt;var er=Rt;var tr=Vt;var nr=Ht;var rr=vt;var ir=Tt;var ar=Nt;var or=Ae;var sr=re.value;var cr=$n;var lr=Pt;var ur=er;var dr=tr;var fr=nr;var pr=Ft;var mr=$;var hr=tt;var gr=Ce;var _r=Ce;var vr=Rn;var yr=zn;var br=Mn;var xr=rr;var Sr=Wt;var Cr=fn;var wr=ir;var Tr=ar;var Er=Nn;var Dr=rn;var Or=un;var kr=We;var Ar=Ge;var jr=X;var Mr=Ne;var Nr=Pe;var Pr=Fe;var Fr=Ie;var Ir=Le;var Lr=Re;var Rr=Ae;var zr=or;var Br=je;var Vr=Me;var Hr=ze;var Ur=Je;var Wr=Bn;var Gr=St;var Kr=Ct;var qr=bt;var Jr=xt;var Yr=Ut;var Xr=Wn;var Zr=Yn;var Qr=Gn;var $r=nn;var ei=an;var ti=Ln;var ni=Fn;var ri=Pn;var ii=Gt;var ai=k;var oi=Ye;var si=ke;var ci=vn;var li=Xn;var ui=Zn;var di=Qn;var fi=Tn;var pi=En;var mi=Dn;var hi=On;var gi=kn;var _i=An;var vi=jn;var yi=Vn;var bi=si(Or({number:dr,negNumber:dr,maxNumber:dr,string:cr,longString:cr,boolean:lr,deeplyNested:{foo:cr,num:dr,bool:lr},items:xr(dr)}),`Any`,`Assert`,`Sync`);export{bi as default};